# Data Model: RAG Ingestion Pipeline

## Overview
Data models for the RAG ingestion pipeline that extracts, chunks, and embeds content from the deployed book website.

## Entity: Content Chunk
**Description**: A segment of text extracted from the book with preserved metadata
**Fields**:
- `text` (string): The actual text content of the chunk
- `module` (string): The book module where this content originated
- `page` (string): The specific page title
- `heading` (string): The section heading where the chunk originated
- `url` (string): The full URL to the source content

**Validation rules**:
- `text` must not be empty
- `url` must be a valid URL format

## Entity: Embedding Vector
**Description**: A numerical representation of content chunk generated by Cohere's embedding model
**Fields**:
- `vector` (array of floats): The embedding vector from Cohere
- `model` (string): The embedding model used (e.g., "embed-english-v3.0")

**Validation rules**:
- `vector` must have consistent dimensions based on the model (1024 for Cohere v3.0)

## Entity: Vector Record (Qdrant Payload)
**Description**: An entry in Qdrant containing the embedding vector and associated metadata for retrieval
**Fields**:
- `id` (string): Unique identifier for the record in Qdrant (auto-generated by Qdrant)
- `vector` (array of floats): The embedding vector
- `payload` (object): Metadata object containing:
  - `text` (string): The original text content
  - `module` (string): The book module
  - `page` (string): The page title
  - `heading` (string): The section heading
  - `url` (string): The source URL

**Validation rules**:
- `vector` must match the expected dimension for the collection (1024 for Cohere model)
- All payload fields must be properly formatted

## Entity: Crawl Configuration
**Description**: Parameters defining which URLs to crawl, content selectors, and chunking rules
**Fields**:
- `base_url` (string): The root URL to start crawling from
- `content_selector` (string): CSS selector for main content area
- `heading_selector` (string): CSS selector for headings
- `chunk_size` (integer): Target size for text chunks in tokens
- `chunk_overlap` (integer): Overlap between chunks in tokens

**Validation rules**:
- `base_url` must be a valid URL
- `chunk_size` must be between 100 and 2000 tokens